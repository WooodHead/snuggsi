var this$1=this,HTMLLinkElement=function(t){console.log(t);var e=document.querySelector("link#"+t+"[rel=import], link[href*="+t+"][rel=import]")||{};return Object.defineProperty(e,"onload",{set:function(t){HTMLImports.useNative?t({target:e}):HTMLImports.whenReady(function(){return t({target:e})})}}),e},TokenList=function(t){var e=this,n=function(t){return t.text=t.textContent,t},o=function(t){return t.textContent.match(/{(\w+|#)}/g).map(r).map(i(t))},r=function(t){return t.match(/(\w+|#)/g)[0]},i=function(t){return function(n){return(e[n]=e[n]||[])&&e[n].push(t)}};this.sift(t).map(n).map(o)};TokenList.prototype.sift=function(t){for(var e=[],n=function(t){return t.nodeType===Node.TEXT_NODE?o(t)&&NodeFilter.FILTER_ACCEPT:r(t.attributes)&&NodeFilter.FILTER_REJECT},o=function(t){return t.nodeType===Node.TEXT_NODE&&/{(\w+|#)}/.test(t.textContent)},r=function(t){return Array.from(t||[]).filter(function(t){return/{(\w+|#)}/g.test(t.value)}).map(function(t){return e.push(t)})},i=document.createNodeIterator(t,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT,n);t=i.nextNode();)e.push(t);return e},TokenList.prototype.bind=function(t){var e=this,n=function(t){return e[t].map(function(t){return t.textContent=t.text})&&t},o=function(t){return e[t].map(r(t))},r=function(e){return function(n){return n.textContent=n.textContent.replace("{"+e+"}",t[e])}};return Object.keys(this).map(n).map(o),this};var Template=function(t){function e(t){var e=this;this.dependents=this.dependents||[],t=Array.isArray(t)?t:[t];for(var n=void 0,o=[];n=this.dependents.pop();)n.remove();return t.forEach(function(t,n){var r=e.cloneNode(!0),i=new TokenList(r.content);t="object"==typeof t?t:{self:t},t["#"]=n,i.bind(t),o.push(r.content)}),o.map(function(t){(e=this.dependents).push.apply(e,t.childNodes);var e},this)(r=this).after.apply(r,o),this;var r}return Object.assign(document.querySelector("template[name="+t+"]"),{bind:e})},EventTarget=function(t){return function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.listen=function(t,e){void 0===e&&(e=this$1[t]),this.addEventListener(t,e)},e}(t)},ParentNode=function(t){return function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={tokens:{}};return e.prototype.selectAll=function(t){return this.querySelectorAll(t)},e.prototype.select=function(t){return this.selectAll(t)[0]},n.tokens.get=function(){return this._tokens=this._tokens||new TokenList(this)},Object.defineProperties(e.prototype,n),e}(t)},GlobalEventHandlers=function(t){return function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.register=function(e){var n=this;void 0===e&&(e=function(t){return/^on/.exec(t)});var o=":not(script):not(template):not(style):not(link)",r=Array.from(this.querySelectorAll(o)),i=function(t){return Array.from(t.attributes).map(function(t){return t.name}).filter(e).length>0},u=function(e,o){return void 0===o&&(o=(/{\s*(\w+)\s*}/.exec(e)||[])[1]),o&&t[o].bind(n)||e||null},c=function(){return function(t){return Array.from(t.attributes).map(function(t){return t.name}).filter(e).filter(function(t){return void 0!==n[t]}).map(s(t))}},s=function(t){return function(e){t[e]=u(t[e])}},p=function(e){return void 0==!n[e]&&(n[e]=t[e].bind(n))};return void[this].concat(r).filter(i).map(c(this)),Object.getOwnPropertyNames(t).filter(e).map(p),this},e}(t)},Component=function(t){return function(t){function e(){t.call(this),this.context={},this.initialize&&this.initialize()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){console.log("rendering",this),this.tokens.bind(this),void function(t){var e=this,n=function(t){var n=t.getAttribute("name");void new Template(n).bind(e[n])};t.map(n)}.call(this,Array.from(this.selectAll("template[name]"))),this.register(),this.constructor.onready&&this.constructor.onready.call(this)},e.prototype.connectedCallback=function(){var t=new HTMLLinkElement(this.tagName.toLowerCase());t.onload=this.clone.bind(this)},e.prototype.clone=function(t){console.log("cloning",t.target),console.log("wat",this,t.target);var e=t.target["import"],n=e&&e.children[0];console.log("document",this,n),this.render()},e}(EventTarget(ParentNode(GlobalEventHandlers(t))))},ElementPrototype=window.Element.prototype,Element=function(t,e){return void 0===e&&(e=window.customElements),t=t[0],function(n){this===window?{}:this;return e.define(t,Component(n)),e.get(t)}};Element.prototype=ElementPrototype;