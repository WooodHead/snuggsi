const HTMLLinkElement=function(t){const e=new Event("load"),n=document.querySelector("link[href*="+t+"][rel=import]");return(e.target=n)&&window.HTMLImports&&!window.HTMLImports.useNative&&HTMLImports.whenReady(t=>n.dispatchEvent(e)),n};class TokenList{constructor(t){this.sift(t).map(this.tokenize,this)}tokenize(t){(t.text=t.textContent).match(/([^{]*?)(\w|#)(?=\})/g).map((t=>e=>(this[e]=this[e]||[]).push(t))(t))}sift(t){const e=[],n=/{(\w+|#)}/,r=t=>n.test(t.textContent)&&e.push(t),s=t=>Array.from(t).map(t=>n.test(t.value)&&e.push(t)),o=document.createNodeIterator(t,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT,t=>t.nodeType===Node.TEXT_NODE?r(t):s(t.attributes)&&NodeFilter.FILTER_REJECT);for(;o.nextNode(););return e}bind(t){Object.keys(this).map(t=>this[t].map(e=>(e.textContent=e.text)&&t));for(let e in this)this[e].map(((e,n="{"+e+"}")=>r=>r.textContent=r.textContent.replace(n,t[e]))(e))}}const Template=HTMLTemplateElement=function(t){return t="string"==typeof t?document.querySelector("template[name="+t+"]"):t,Object.assign(t,{bind:function(t){let e="",n=this.innerHTML,r=[].concat(...[t]),s=Object.keys(r[0]||[]).concat(["#","self"]),o=s.map(t=>"{"+t+"}"),i=document.createElement("template");(this.dependents||[]).map(t=>t.remove());for(let l=0;l<r.length;l++)e+=((t,e)=>{let r=n;(t="object"==typeof t?t:{self:t})["#"]=e;for(let n=0;n<o.length;n++)r=r.split(o[n]).join(t[s[n]]);return r})(r[l],l);i.innerHTML=e,this.dependents=Array.from(i.content.childNodes),this.after(...this.dependents)}})},EventTarget=t=>class extends t{on(t,e){this.addEventListener(t,this.renderable(e))}renderable(t){return(e,n=!0)=>(e.prevent=(t=>(n=!1)&&e.preventDefault()))&&!1!==t.call(this,e)&&n&&this.render()}},ParentNode=t=>class extends t{selectAll(t,...e){t=[].concat(...[t]);return Array.from(this.querySelectorAll(e.reduce((e,n)=>e+n+t.shift(),t.shift())))}select(...t){return this.selectAll(...t)[0]}},GlobalEventHandlers=t=>class extends t{onconnect(t,e){(e=t.target)&&this.mirror(e.import.querySelector("template")),super.onconnect&&super.onconnect(),this.tokens=new TokenList(this),this.render()}reflect(t,e){(e=(t.match(/^on(.+)$/)||[])[1])&&Object.keys(HTMLElement.prototype).includes(t)&&this.on(e,this[t])}register(t){Array.from(t.attributes).map(t=>t.name).filter(t=>/^on/.test(t)).map((e,n)=>(n=/{\s*(\w+)\s*}/.exec(t[e]))&&(n=this[(n||[])[1]])&&(t[e]=this.renderable(n)))}},Custom=t=>class extends(EventTarget(ParentNode(GlobalEventHandlers(t)))){constructor(){return super(),console.log("holy fuck this is working!!!",this),this}connectedCallback(t){console.warn("HAIL MARY",this,this.foo,this.bar,this.baz,this.onconnect)}render(){this.tokens.bind(this),Array.from(this.selectAll("template[name]")).map(t=>t.getAttribute("name")).map(t=>new Template(t).bind(this[t])),Array.from(this.selectAll("*")).concat([this]).map(this.register,this),super.onidle&&super.onidle()}mirror(t,e){t=t.cloneNode(!0),e=((e,n,r)=>(n=e.getAttribute("slot"))&&(r=t.content.querySelector("slot[name="+n+"]")).parentNode.replaceChild(e,r));for(let n of this.selectAll("[slot]"))e(n);Array.from(t.attributes).filter(t=>!this.attributes[t.name]).map(t=>this.setAttribute(t.name,t.value)),this.innerHTML=t.innerHTML}},ElementPrototype=window.Element.prototype,Element=t=>{const e="string"==typeof t;return n=>{window.customElements.define(...[].concat(...[t]),Custom(n),{prototype:e})}};(t=>{const e="string"==typeof t;return n=>{window.customElements.define(...[].concat(...[t]),Custom(n),{prototype:e})}}).prototype=ElementPrototype;