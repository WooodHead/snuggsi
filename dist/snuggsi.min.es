function State(t,e){var n=this;void 0===e&&(e=function(){}),this.subscribe=function(t){return e=t};var r=Array(t),o=function(t){return JSON.parse(JSON.stringify(t))},i=function(t){return[t,{get:function(){return r[r.length-1][t]},set:function(n){var i=o(previous=r[r.length-1]);i[t]=n,e(previous,i),r[r.length]=i}}]};for(property in t)Object.defineProperty.apply(Object,[n].concat(i(property)))}function tag(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=/string/.test(typeof t[0])?t[0]:t[0][0];context=t[1];var r=function(t){/string|number|boolean/.test(typeof t)&&(t={self:t});var e=Object.keys(t).map(function(t){return"{"+t+"}"}).join("|"),r=RegExp(e,"g");return n.trim().replace(r,function(e){return t[e.replace(/{|}/g,"")]})};return context?r(context):function(t){return r(t)}}var Template=function(t){return Object.assign(this.factory(t),{bind:this.bind})};Template.prototype.factory=function(t){return(document.getElementById(t)||document.createElement("template")).cloneNode(!0)},Template.prototype.bind=function(t){var e=this.innerHTML,n=function(t){return tag(e)(t)},r=Array.isArray(t)?t.map(n):[n(t)];return this.innerHTML=r.join(""),this},document.addEventListener("DOMContentLoaded",function(){return console.log("DOM fully loaded and parsed")});var ElementPrototype=window.Element.prototype,Element=function(t){for(var e=[],n=arguments.length-1;n-->0;)e[n]=arguments[n+1];return this instanceof Element?new self.Element:function(e){if(!e)try{return new(window.customElements.get(t))}catch(n){throw"Must define custom element \n(i.e. Element `"+t+"` (class {})"}(!new.target)&&(self=this);var r=function(t){function e(e){void 0===e&&(e=self),t.call(this),console.log("self",self),this.context=new State(e,this.stateChangedCallback)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={rendered:{},context:{}},r={observedAttributes:{}};return n.rendered.get=function(){return this.render()},e.prototype.render=function(e,n){void 0===n&&(n=this.context);var r=e?this.select(e):this,o=t.prototype.render.call(this,e);n=Array.isArray(n)?n:[n],r.innerHTML=n.map(function(t){return tag(o,t)}).join("")},e.prototype.select=function(t){return this.listenable([this.querySelector(t)])[0]},e.prototype.selectAll=function(t){return this.listenable(this.querySelectorAll(t))},e.prototype.listenable=function(t){var e=this;return Array.prototype.map.call(t,function(t){return Object.assign(t,{listen:e.listen.bind(e)})})},e.prototype.listen=function(t,e){void 0===e&&(e=this[t]),this.addEventListener(t,e)},n.context.get=function(){return self},n.context.set=function(t){return console.warn("setting context",t),self=t},e.prototype.stateChangedCallback=function(t,e){console.warn("previous",t),console.warn("next",e)},e.prototype.attributeChangedCallback=function(t,e,n){console.warn("["+name+"] "+e+" to "+n)},r.observedAttributes.get=function(){return["id"]},e.prototype.connectedCallback=function(){t.prototype.connectedCallback.call(this)},e.prototype.disconnectedCallback=function(){console.warn("disconnected",this)},e.prototype.adoptedCallback=function(){console.warn("adopted this",this)},Object.defineProperties(e.prototype,n),Object.defineProperties(e,r),e}(e);try{window.customElements.define(t,r)}finally{return window.customElements.get(t)}}};Element.prototype=window.Element.prototype;
