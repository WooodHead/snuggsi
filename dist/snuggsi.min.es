const HTMLLinkElement=function(e){const t=new Event("load"),n=document.querySelector("link[href*="+e+"][rel=import]");return(t.target=n)&&window.HTMLImports&&!window.HTMLImports.useNative&&HTMLImports.whenReady(e=>n.dispatchEvent(t)),n};class TokenList{constructor(e){this.sift(e).map(this.tokenize,this)}tokenize(e){(e.text=e.textContent).match(/([^{]*?)(\w|#)(?=\})/g).map((e=>t=>(this[t]=this[t]||[]).push(e))(e))}sift(e){const t=[],n=/{(\w+|#)}/,r=e=>n.test(e.textContent)&&t.push(e),s=e=>Array.from(e).map(e=>n.test(e.value)&&t.push(e)),o=document.createNodeIterator(e,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT,e=>e.nodeType===Node.TEXT_NODE?r(e):s(e.attributes)&&NodeFilter.FILTER_REJECT);for(;o.nextNode(););return t}bind(e){Object.keys(this).map(e=>this[e].map(t=>(t.textContent=t.text)&&e));for(let t in this)this[t].map(((t,n="{"+t+"}")=>r=>r.textContent=r.textContent.replace(n,e[t]))(t))}}const Template=HTMLTemplateElement=function(e){return e="string"==typeof e?document.querySelector("template[name="+e+"]"):e,Object.assign(e,{bind:function(e){let t="",n=this.innerHTML,r=[].concat(...[e]),s=Object.keys(r[0]||[]).concat(["#","self"]),o=s.map(e=>"{"+e+"}"),i=document.createElement("template");(this.dependents||[]).map(e=>e.remove());for(let l=0;l<r.length;l++)t+=((e,t)=>{let r=n;(e="object"==typeof e?e:{self:e})["#"]=t;for(let n=0;n<o.length;n++)r=r.split(o[n]).join(e[s[n]]);return r})(r[l],l);i.innerHTML=t,this.dependents=Array.from(i.content.childNodes),this.after(...this.dependents)}})},EventTarget=e=>class extends e{on(e,t){this.addEventListener(e,this.renderable(t))}renderable(e){return(t,n=!0)=>(t.prevent=(e=>(n=!1)&&t.preventDefault()))&&!1!==e.call(this,t)&&n&&this.render()}},ParentNode=e=>class extends e{selectAll(e,...t){e=[].concat(...[e]);return Array.from(this.querySelectorAll(t.reduce((t,n)=>t+n+e.shift(),e.shift())))}select(...e){return this.selectAll(...e)[0]}},GlobalEventHandlers=e=>class extends e{onconnect(e,t){(t=e.target)&&this.mirror(t.import.querySelector("template")),super.onconnect&&super.onconnect(),this.tokens=new TokenList(this),this.render()}reflect(e,t){(t=(e.match(/^on(.+)$/)||[])[1])&&Object.keys(HTMLElement.prototype).includes(e)&&this.on(t,this[e])}register(e){Array.from(e.attributes).map(e=>e.name).filter(e=>/^on/.test(e)).map((t,n)=>(n=/{\s*(\w+)\s*}/.exec(e[t]))&&(n=this[(n||[])[1]])&&(e[t]=this.renderable(n)))}},Component=e=>class extends(EventTarget(ParentNode(GlobalEventHandlers(e)))){constructor(){super();let t=Object.getOwnPropertyDescriptors(e.prototype);Object.keys(t).map(e=>"function"==typeof t[e].value&&(this[e]=this[e].bind(this))),Object.getOwnPropertyNames(e.prototype).map(this.reflect,this),this.context={},this.initialize&&this.initialize()}connectedCallback(e){(e=HTMLLinkElement(this.tagName.toLowerCase()))?e.addEventListener("load",this.onconnect.bind(this)):this.onconnect(new Event("load"))}render(){this.tokens.bind(this),Array.from(this.selectAll("template[name]")).map(e=>new Template(e).bind(this[name])),Array.from(this.selectAll("*")).concat([this]).map(this.register,this),super.onidle&&super.onidle()}mirror(e,t){e=e.cloneNode(!0),t=((t,n,r)=>(n=t.getAttribute("slot"))&&(r=e.content.querySelector("slot[name="+n+"]")).parentNode.replaceChild(t,r));for(let n of this.selectAll("[slot]"))t(n);Array.from(e.attributes).filter(e=>!this.attributes[e.name]).map(e=>this.setAttribute(e.name,e.value)),this.innerHTML=e.innerHTML}},ElementPrototype=window.Element.prototype,Element=e=>t=>window.customElements.define(...[].concat(...[e]),Component(t));(e=>t=>window.customElements.define(...[].concat(...[e]),Component(t))).prototype=ElementPrototype;