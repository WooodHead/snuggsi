const
  contents =
    require ('fs')
      .readFileSync
         ('./dist/snuggsi.es', {encoding: 'UTF-8'})

const
  compile =
    require ('google-closure-compiler-js').compile

const flags = {
    jsCode: [{src: contents }],
//  languageIn: 'ES6',
    compilationLevel: 'ADVANCED_OPTIMIZATIONS
    // https://developers.google.com/closure/compiler/docs/limitations
}

const out =
  compile (flags)

   if (out.errors && out.errors.length) {
       console.log(out.errors)
       throw new Error(`Minification failed`);
   }

console.log(out.compiledCode)

