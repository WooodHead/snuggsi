<template id=header-group>
  <style>
    :root { border: 1px solid green; }
    hgroup { display: block; width: 100%; }
  </style>

  <hgroup>
    <h1><a href=/examples/index.html>snuggsi ãƒ„</a></h1>
    <slot name=header><h2>try an example</h2></slot>
  </hgroup>
</template>

<script>
const tag = `header-group`

Element `header-group`

(class extends HTMLElement {

  static onimportload (event) {
    const foo = event.target.import
      .querySelector ('template')
      // possibly should be adopting node into document

    const shadow = element => {
      const template = foo.cloneNode (true)

      template.slots =
        Array.from (template.content.querySelectorAll ('slot'))

      element.slots =
        Array.from (element.querySelectorAll ('[slot]'))

      element.slots.map (function (namedslot) {
        template.slots
          .filter (slot =>
            (slot.getAttribute ('name') === namedslot.getAttribute ('slot'))
          )
          .map (slot => {
            slot.innerHTML = ''
            , slot.appendChild (namedslot)
          })
      })

      element.innerHTML = ''
      element.append (template.content)
    }

    Array.from
      // should be using currentScript ?
      (document.getElementsByTagName (tag))
      .map (shadow)
  }

  initialize () {
    const selector = `link#${tag}, link[href='${tag}.html']`
    const link = document
      .querySelector (selector)

    ! link.onload &&
    !! (link.onload = this.constructor.onimportload.bind (this))
  }

})
</script>

