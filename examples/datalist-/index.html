<title>&lt;datalist-&gt;</title>

<script src=/snuggsi.es></script>
<script name=polyfill src=https://cdnjs.cloudflare.com/ajax/libs/webcomponentsjs/1.0.0/webcomponents-hi-ce.js></script>

<link rel=stylesheet href=https://devpunks.herokuapp.com/typography.css>

<!-- import works inline body -->
<link rel=import href=/examples/header-group>

<header-group>
  <h2 slot=header>&lt;datalist-&gt;</h2>
  <a  slot=subheader title='See more component examples' href=/examples>See more component examples</a>
</header-group>

<input list=foo>

<!-- https://developer.mozilla.org/en-US/docs/Web/HTML/Element/datalist -->
<datalist id=foo>

  <label>
    <select name=sex multiple>
      <!-- <option disabled selected value>Select Option -->
      <!-- https://stackoverflow.com/questions/8605516/default-select-option-as-blank#answer-23638053 -->

      <!-- https://developer.mozilla.org/en-US/docs/Web/HTML/Element/option -->
      <!-- https://developer.mozilla.org/en-US/docs/Web/HTML/Element/optgroup -->
      <option>Female
      <option>Male
    </select>
  </label>
</datalist>

<datalist->
  <!-- can have phrasing content - https://html.spec.whatwg.org/multipage/dom.html#phrasing-content-2 -->
  <template>
  <!-- https://developer.mozilla.org/en-US/docs/Web/HTML/Element/li -->
  <li>
    <label><input value={value} type={type}>{name}</label>
  </template>
</datalist->

<script>

  Element `datalist-`
  // https://html.spec.whatwg.org/multipage/form-elements.html#the-datalist-element
  (class extends HTMLElement {

    initialize (datalists = document.querySelectorAll `datalist`) {
      for (let datalist of datalists)
        this.polyfill (datalist)
    }

    polyfill (datalist) {
      const options =
        datalist.querySelectorAll
          `option:not(:disabled)`

      !!!  ('options' in datalist)
        && (datalist.options = Array.from (options))

      datalist.querySelector ('select').addEventListener ('input', this.onchange)
    }

    onconnect () {
      this.lists  = document.querySelectorAll `datalist`
    }

    onidle () {
      for (let datalist of this.lists)
        console.warn ('Snuggs', datalist.options)
    }

    get id () {
      return this.getAttribute `id`
    }
  })
</script>

<script src=/browser-sync.es></script>
